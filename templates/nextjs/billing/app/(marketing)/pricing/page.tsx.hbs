"use client";

import { useState } from "react";
import { PricingCard } from "@/components/billing/pricing-card";
import { getAllPlans } from "@/lib/plans";

export default function PricingPage() {
  const [billingInterval, setBillingInterval] = useState<"monthly" | "yearly">("monthly");
  const plans = getAllPlans();

  return (
    <div className="mx-auto max-w-6xl px-4 py-16">
      <div className="text-center">
        <h1 className="text-4xl font-bold tracking-tight">Simple, transparent pricing</h1>
        <p className="mt-4 text-lg text-gray-600">
          Choose the plan that fits your needs. Upgrade or downgrade at any time.
        </p>
{{#if hasTrial}}
        <p className="mt-2 text-sm text-blue-600">
          All paid plans include a {{trialDays}}-day free trial
        </p>
{{/if}}
      </div>

      <div className="mt-8 flex justify-center">
        <div className="inline-flex rounded-lg border p-1">
          <button
            onClick={() => setBillingInterval("monthly")}
            className={`rounded-md px-4 py-2 text-sm font-medium ${
              billingInterval === "monthly"
                ? "bg-blue-600 text-white"
                : "text-gray-500 hover:text-gray-700"
            }`}
          >
            Monthly
          </button>
          <button
            onClick={() => setBillingInterval("yearly")}
            className={`rounded-md px-4 py-2 text-sm font-medium ${
              billingInterval === "yearly"
                ? "bg-blue-600 text-white"
                : "text-gray-500 hover:text-gray-700"
            }`}
          >
            Yearly <span className="text-xs">(Save 17%)</span>
          </button>
        </div>
      </div>

      <div className="mt-12 grid gap-8 md:grid-cols-{{planDetails.length}}">
        {plans.map((plan) => (
          <PricingCard
            key={plan.id}
            plan={plan}
            billingInterval={billingInterval}
            isPopular={plan.id === "pro"}
          />
        ))}
      </div>
    </div>
  );
}
